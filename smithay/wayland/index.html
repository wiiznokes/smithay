<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Protocol-related utilities"><title>smithay::wayland - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="smithay" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.0-nightly (7c52d2db6 2024-06-03)" data-channel="nightly" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../smithay/index.html">smithay</a><span class="version">0.3.0</span></h2></div><h2 class="location"><a href="#">Module wayland</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li></ul></section><h2><a href="../index.html">In crate smithay</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">smithay</a>::<wbr><a class="mod" href="#">wayland</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/smithay/wayland/mod.rs.html#1-82">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>wayland_frontend</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Protocol-related utilities</p>
<p>This module contains several handlers to manage the Wayland protocol
and the clients.</p>
<h3 id="general-structure"><a class="doc-anchor" href="#general-structure">§</a>General structure</h3>
<p>Most utilities provided in this module work in the same way:</p>
<ul>
<li>A module specific <code>*State</code> struct will take the wayland display as argument and
insert one or more globals into it through its constructor.</li>
<li>The module-<code>State</code> will have to be stored inside your global compositor state.
(The same type you parametrized <a href="../../wayland_server/display/struct.Display.html" title="struct wayland_server::display::Display"><code>wayland_server::Display</code></a> over.)</li>
<li>You need to implement a module-specific <code>*Handler</code>-trait for your compositor state.
This implementation will be called when wayland events require custom handling.</li>
<li>Call the matching <code>delegate_*!</code> macro from smithay on your state to implement
some required <code>wayland_server</code> traits.</li>
<li>If you want to remove a previously inserted global, just drop the <code>*State</code>.</li>
</ul>
<h3 id="provided-helpers"><a class="doc-anchor" href="#provided-helpers">§</a>Provided helpers</h3><h4 id="core-functionality"><a class="doc-anchor" href="#core-functionality">§</a>Core functionality</h4>
<p>The most fundamental module is the <a href="compositor/index.html" title="mod smithay::wayland::compositor"><code>compositor</code></a> module, which provides the necessary
logic to handle the fundamental component by which clients build their windows: surfaces.
Following this, the <a href="shell/index.html" title="mod smithay::wayland::shell"><code>shell</code></a> module contains the logic allowing clients to use their
surface to build concrete windows with the usual interactions. Different kind of shells
exist, but in general you will want to support at least the <a href="shell/xdg/index.html" title="mod smithay::wayland::shell::xdg"><code>xdg</code></a> variant,
which is the standard used by most applications.</p>
<p>Then, the <a href="seat/index.html" title="mod smithay::wayland::seat"><code>seat</code></a> module contains logic related to input handling. These helpers are used
to forward input (such as pointer action or keystrokes) to clients, and manage the input
focus of clients. Tightly coupled with it is the <a href="selection/index.html" title="mod smithay::wayland::selection"><code>selection</code></a> module, which handles
cross-client interactions such as accessing the clipboard, or drag’n’drop actions.</p>
<p>The <a href="shm/index.html" title="mod smithay::wayland::shm"><code>shm</code></a> module provides the necessary logic for client to provide buffers defining the
contents of their windows using shared memory. This is the main mechanism used by clients
that are not hardware accelerated. As a complement, the <a href="dmabuf/index.html" title="mod smithay::wayland::dmabuf"><code>dmabuf</code></a> module provides support
hardware-accelerated clients; it is tightly linked to the
<a href="../backend/allocator/index.html" title="mod smithay::backend::allocator"><code>backend::allocator</code></a> module.</p>
<p>The <a href="output/index.html" title="mod smithay::wayland::output"><code>output</code></a> module helps forwarding to clients information about the display monitors that
are available. This notably plays a key role in HiDPI handling, and more generally notifying
clients about whether they are currently visible or not (allowing them to stop drawing if they
are not, for example).</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="alpha_modifier/index.html" title="mod smithay::wayland::alpha_modifier">alpha_modifier</a></div><div class="desc docblock-short">Implementation of <code>wp_alpha_modifier</code> protocol</div></li><li><div class="item-name"><a class="mod" href="buffer/index.html" title="mod smithay::wayland::buffer">buffer</a></div><div class="desc docblock-short">Buffer management traits.</div></li><li><div class="item-name"><a class="mod" href="compositor/index.html" title="mod smithay::wayland::compositor">compositor</a></div><div class="desc docblock-short">Utilities for handling surfaces, subsurfaces and regions</div></li><li><div class="item-name"><a class="mod" href="content_type/index.html" title="mod smithay::wayland::content_type">content_type</a></div><div class="desc docblock-short">Implementation of wp_content_type protocol</div></li><li><div class="item-name"><a class="mod" href="cursor_shape/index.html" title="mod smithay::wayland::cursor_shape">cursor_shape</a></div><div class="desc docblock-short">Utilities for compositor side cursor theming support</div></li><li><div class="item-name"><a class="mod" href="dmabuf/index.html" title="mod smithay::wayland::dmabuf">dmabuf</a></div><div class="desc docblock-short">Linux DMABUF protocol</div></li><li><div class="item-name"><a class="mod" href="drm_lease/index.html" title="mod smithay::wayland::drm_lease">drm_lease</a><span class="stab portability" title="Available on crate feature `backend_drm` only"><code>backend_drm</code></span></div><div class="desc docblock-short">DRM Lease protocol</div></li><li><div class="item-name"><a class="mod" href="fractional_scale/index.html" title="mod smithay::wayland::fractional_scale">fractional_scale</a></div><div class="desc docblock-short">Utilities for handling the <code>wp_fractional_scale</code> protocol</div></li><li><div class="item-name"><a class="mod" href="idle_inhibit/index.html" title="mod smithay::wayland::idle_inhibit">idle_inhibit</a></div><div class="desc docblock-short">Utilities for handling the <code>zwp_idle_inhibit</code> protocol</div></li><li><div class="item-name"><a class="mod" href="idle_notify/index.html" title="mod smithay::wayland::idle_notify">idle_notify</a></div><div class="desc docblock-short">This interface allows clients to monitor user idle status.</div></li><li><div class="item-name"><a class="mod" href="input_method/index.html" title="mod smithay::wayland::input_method">input_method</a></div><div class="desc docblock-short">Utilities for input method support</div></li><li><div class="item-name"><a class="mod" href="keyboard_shortcuts_inhibit/index.html" title="mod smithay::wayland::keyboard_shortcuts_inhibit">keyboard_shortcuts_inhibit</a></div><div class="desc docblock-short">Protocol for inhibiting the compositor keyboard shortcuts</div></li><li><div class="item-name"><a class="mod" href="output/index.html" title="mod smithay::wayland::output">output</a></div><div class="desc docblock-short">WlOutput advertising capabilities</div></li><li><div class="item-name"><a class="mod" href="pointer_constraints/index.html" title="mod smithay::wayland::pointer_constraints">pointer_constraints</a></div><div class="desc docblock-short">Protocol for confining the pointer.</div></li><li><div class="item-name"><a class="mod" href="pointer_gestures/index.html" title="mod smithay::wayland::pointer_gestures">pointer_gestures</a></div><div class="desc docblock-short">Utilities for pointer gestures support</div></li><li><div class="item-name"><a class="mod" href="presentation/index.html" title="mod smithay::wayland::presentation">presentation</a></div><div class="desc docblock-short">Utilities for handling the <code>wp_presentation</code> protocol</div></li><li><div class="item-name"><a class="mod" href="relative_pointer/index.html" title="mod smithay::wayland::relative_pointer">relative_pointer</a></div><div class="desc docblock-short">Utilities for relative pointer support</div></li><li><div class="item-name"><a class="mod" href="seat/index.html" title="mod smithay::wayland::seat">seat</a></div><div class="desc docblock-short">Seat global utilities</div></li><li><div class="item-name"><a class="mod" href="security_context/index.html" title="mod smithay::wayland::security_context">security_context</a></div><div class="desc docblock-short">Utilities for handling the security context protocol</div></li><li><div class="item-name"><a class="mod" href="selection/index.html" title="mod smithay::wayland::selection">selection</a></div><div class="desc docblock-short">Handler utilities for the various selection protocols.</div></li><li><div class="item-name"><a class="mod" href="session_lock/index.html" title="mod smithay::wayland::session_lock">session_lock</a></div><div class="desc docblock-short">Utilities for handling the <code>ext-session-lock</code> protocol</div></li><li><div class="item-name"><a class="mod" href="shell/index.html" title="mod smithay::wayland::shell">shell</a></div><div class="desc docblock-short">Handler utilities for the various shell protocols</div></li><li><div class="item-name"><a class="mod" href="shm/index.html" title="mod smithay::wayland::shm">shm</a></div><div class="desc docblock-short">SHM handling helpers</div></li><li><div class="item-name"><a class="mod" href="socket/index.html" title="mod smithay::wayland::socket">socket</a></div><div class="desc docblock-short">Wayland listening socket.</div></li><li><div class="item-name"><a class="mod" href="tablet_manager/index.html" title="mod smithay::wayland::tablet_manager">tablet_manager</a></div><div class="desc docblock-short">Utilities for graphics tablet support</div></li><li><div class="item-name"><a class="mod" href="text_input/index.html" title="mod smithay::wayland::text_input">text_input</a></div><div class="desc docblock-short">Utilities for text input support</div></li><li><div class="item-name"><a class="mod" href="viewporter/index.html" title="mod smithay::wayland::viewporter">viewporter</a></div><div class="desc docblock-short">Utilities for handling the <code>wp_viewporter</code> protocol</div></li><li><div class="item-name"><a class="mod" href="virtual_keyboard/index.html" title="mod smithay::wayland::virtual_keyboard">virtual_keyboard</a></div><div class="desc docblock-short">Utilities for virtual keyboard support</div></li><li><div class="item-name"><a class="mod" href="xdg_activation/index.html" title="mod smithay::wayland::xdg_activation">xdg_activation</a></div><div class="desc docblock-short">Utilities for handling activation requests with the <code>xdg_activation</code> protocol</div></li><li><div class="item-name"><a class="mod" href="xdg_foreign/index.html" title="mod smithay::wayland::xdg_foreign">xdg_foreign</a></div><div class="desc docblock-short">Implementation <code>xdg_foreign</code> protocol</div></li><li><div class="item-name"><a class="mod" href="xwayland_keyboard_grab/index.html" title="mod smithay::wayland::xwayland_keyboard_grab">xwayland_keyboard_grab</a><span class="stab portability" title="Available on crate feature `xwayland` only"><code>xwayland</code></span></div><div class="desc docblock-short">Utilities for handling the xwayland keyboard grab protocol</div></li><li><div class="item-name"><a class="mod" href="xwayland_shell/index.html" title="mod smithay::wayland::xwayland_shell">xwayland_shell</a><span class="stab portability" title="Available on crate feature `xwayland` only"><code>xwayland</code></span></div><div class="desc docblock-short">Helpers for handling the xwayland shell protocol</div></li></ul></section></div></main></body></html>