<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Utilities for manipulating the primary selection"><title>smithay::wayland::selection::primary_selection - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="smithay" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.0-nightly (7c52d2db6 2024-06-03)" data-channel="nightly" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../../smithay/index.html">smithay</a><span class="version">0.3.0</span></h2></div><h2 class="location"><a href="#">Module primary_selection</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#reexports">Re-exports</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In smithay::wayland::selection</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../../index.html">smithay</a>::<wbr><a href="../../index.html">wayland</a>::<wbr><a href="../index.html">selection</a>::<wbr><a class="mod" href="#">primary_selection</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../../../src/smithay/wayland/selection/primary_selection/mod.rs.html#1-371">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><span class="item-info"><div class="stab portability">Available on <strong>crate feature <code>wayland_frontend</code></strong> only.</div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Utilities for manipulating the primary selection</p>
<p>The primary selection is an additional protocol modeled after the data device to represent
and additional selection (copy/paste), a concept taken from the X11 Server.
This primary selection is a shortcut to the common clipboard selection,
where text just needs to be selected in order to allow copying it elsewhere
The de facto way to perform this action is the middle mouse button, although it is not limited to this one.</p>
<p>This module provides the freestanding <a href="fn.set_primary_focus.html" title="fn smithay::wayland::selection::primary_selection::set_primary_focus"><code>set_primary_focus</code></a> function:
This function sets the data device focus for a given seat; you’d typically call it
whenever the keyboard focus changes, to follow it (for example in the focus hook of your keyboards).</p>
<p>The module also provides an additional mechanism allowing your compositor to see and interact with
the contents of the primary selection:</p>
<ul>
<li>the freestanding function <a href="fn.set_primary_selection.html" title="fn smithay::wayland::selection::primary_selection::set_primary_selection"><code>set_primary_selection</code></a>
allows you to set the contents of the selection for your clients</li>
<li>the <code>PrimarySelectionHandle</code> gives you the option to inspect new selections
by overriding <a href="../trait.SelectionHandler.html#method.new_selection" title="method smithay::wayland::selection::SelectionHandler::new_selection"><code>SelectionHandler::new_selection</code></a>.</li>
</ul>
<h3 id="initialization"><a class="doc-anchor" href="#initialization">§</a>Initialization</h3>
<p>To initialize this implementation, create the <a href="struct.PrimarySelectionState.html" title="struct smithay::wayland::selection::primary_selection::PrimarySelectionState"><code>PrimarySelectionState</code></a>, store it inside your <code>State</code> struct
and implement the <a href="trait.PrimarySelectionHandler.html" title="trait smithay::wayland::selection::primary_selection::PrimarySelectionHandler"><code>PrimarySelectionHandler</code></a> and <a href="../trait.SelectionHandler.html" title="trait smithay::wayland::selection::SelectionHandler"><code>SelectionHandler</code></a>, as shown in this example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>smithay::delegate_primary_selection;
<span class="kw">use </span>smithay::wayland::selection::SelectionHandler;
<span class="kw">use </span>smithay::wayland::selection::primary_selection::{PrimarySelectionState, PrimarySelectionHandler};

<span class="comment">// Create the primary_selection state
</span><span class="kw">let </span>primary_selection_state = PrimarySelectionState::new::&lt;State&gt;(
    <span class="kw-2">&amp;</span>display.handle(),
);

<span class="comment">// insert the PrimarySelectionState into your state
// ..

// implement the necessary traits
</span><span class="kw">impl </span>SelectionHandler <span class="kw">for </span>State {
    <span class="kw">type </span>SelectionUserData = ();
}
<span class="kw">impl </span>PrimarySelectionHandler <span class="kw">for </span>State {
    <span class="kw">fn </span>primary_selection_state(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; <span class="kw-2">&amp;</span>PrimarySelectionState { <span class="kw-2">&amp;</span><span class="self">self</span>.primary_selection_state }
    <span class="comment">// ... override default implementations here to customize handling ...
</span>}
<span class="macro">delegate_primary_selection!</span>(State);

<span class="comment">// You're now ready to go!</span></code></pre></div>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name" id="reexport.PrimaryDeviceUserData"><code>pub use device::PrimaryDeviceUserData;</code></div></li><li><div class="item-name" id="reexport.PrimarySourceUserData"><code>pub use source::PrimarySourceUserData;</code></div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.PrimarySelectionState.html" title="struct smithay::wayland::selection::primary_selection::PrimarySelectionState">PrimarySelectionState</a></div><div class="desc docblock-short">State of the primary selection.</div></li><li><div class="item-name"><a class="struct" href="struct.SourceMetadata.html" title="struct smithay::wayland::selection::primary_selection::SourceMetadata">SourceMetadata</a></div><div class="desc docblock-short">The metadata describing a data source</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.SelectionRequestError.html" title="enum smithay::wayland::selection::primary_selection::SelectionRequestError">SelectionRequestError</a></div><div class="desc docblock-short">Errors happening when requesting selection contents</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.PrimarySelectionHandler.html" title="trait smithay::wayland::selection::primary_selection::PrimarySelectionHandler">PrimarySelectionHandler</a></div><div class="desc docblock-short">Access the primary selection state.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.clear_primary_selection.html" title="fn smithay::wayland::selection::primary_selection::clear_primary_selection">clear_primary_selection</a></div><div class="desc docblock-short">Clear the current selection for this seat</div></li><li><div class="item-name"><a class="fn" href="fn.current_primary_selection_userdata.html" title="fn smithay::wayland::selection::primary_selection::current_primary_selection_userdata">current_primary_selection_userdata</a></div><div class="desc docblock-short">Gets the user_data for the currently active selection, if set by the compositor</div></li><li><div class="item-name"><a class="fn" href="fn.request_primary_client_selection.html" title="fn smithay::wayland::selection::primary_selection::request_primary_client_selection">request_primary_client_selection</a></div><div class="desc docblock-short">Request the current primary selection of the given seat
to be written to the provided file descriptor with the given mime type.</div></li><li><div class="item-name"><a class="fn" href="fn.set_primary_focus.html" title="fn smithay::wayland::selection::primary_selection::set_primary_focus">set_primary_focus</a></div><div class="desc docblock-short">Set the primary selection focus to a certain client for a given seat</div></li><li><div class="item-name"><a class="fn" href="fn.set_primary_selection.html" title="fn smithay::wayland::selection::primary_selection::set_primary_selection">set_primary_selection</a></div><div class="desc docblock-short">Set a compositor-provided primary selection for this seat</div></li></ul></section></div></main></body></html>